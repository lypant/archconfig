#!/bin/bash

###############################################################################
REPOSITORY="https://raw.github.com/lypant/archconfig/modular"

###############################################################################
# System settings

HDD="/dev/sda"
SWAP_PARTITION="sda1"
ROOT_PARTITION="sda2"
SWAP_SIZE="+1G"
ROOT_SIZE=""	# Remaining space
ROOT_FILE_SYSTEM="ext4"
CONSOLE_FONT="Lat2-Terminus16"
KEYMAP="pl"
HOST_NAME="archvb"
USER_NAME="adam"
HWCLOCK="--systohc --utc"
LANGUAGE1="en_US.UTF-8"
LANGUAGE2="pl_PL.UTF-8"
TIME_ZONE="Europe/Warsaw"
NETWORK_SERVICE="dhcpcd"
NETWORK_INTERFACE_WIRED="enp0s3"
USER_SHELL="/bin/bash"
USER_MAIN_GROUP="users"
USER_ADDITIONAL_GROUPS="wheel,storage,power"
PACSTRAP_PACKAGES="base base-devel"
TERMINAL_EMULATOR_COMMAND="urxvt"

CUSTOMIZATION_PACKAGES="vim alsa-utils xorg-server xorg-server-utils xorg-xinit mesa virtualbox-guest-utils dmenu rxvt-unicode ttf-inconsolata ttf-dejavu git"

VIRTUALBOX_MODULES="vboxguest vboxsf vboxvideo"
BOOTLOADER_VGA_MODE="864"
BOOTLOADER_KERNEL_PARAMS="rw vga=$BOOTLOADER_VGA_MODE quiet"

DWM_BUILD_PATH="/home/$USER_NAME/build/dwm"


# Secondary settings
MIRROR_COUNT="5"

USER_HOME_PATH="/home/$USER_NAME"
VIM_COLORS_TARGET_PATH="$USER_HOME_PATH/.vim/colors"

###############################################################################
# Script paths etc

# UTILS
UTILS_PATH="utils"

MODULES_PATH="modules"

# BASE

# Main directory
GET_FILE="get.sh"
SETTINGS_FILE="settings.conf"
INSTALL_FILE="install.sh"
CUSTOMIZE_FILE="customize.sh"

# Utils
FUNCTIONS_FILE="$UTILS_PATH/functions.sh"
DOWNLOAD_FILE="$UTILS_PATH/download.sh"
COPY_FILE="$UTILS_PATH/copy.sh"

# Base
BASE_PATH="$MODULES_PATH/base"

# Disk
DISK_PATH="$BASE_PATH/disk"

PARTITION_DISKS_FILE="$DISK_PATH/partition_disks.sh"
CREATE_FILE_SYSTEMS_FILE="$DISK_PATH/create_file_systems.sh"
MOUNT_PARTITIONS_FILE="$DISK_PATH/mount_partitions.sh"
UNMOUNT_PARTITIONS_FILE="$DISK_PATH/unmount_partitions.sh"

# Pacman
PACMAN_PATH="$BASE_PATH/pacman"

UPDATE_ISO_PACMAN_FILE="$PACMAN_PATH/update_iso_pacman.sh"
RANK_MIRRORS_FILE="$PACMAN_PATH/rank_mirrors.sh"

# System
SYSTEM_PATH="$BASE_PATH/system"

INSTALL_BASE_SYSTEM_FILE="$SYSTEM_PATH/install_base_system.sh"

# Fstab
FSTAB_PATH="$BASE_PATH/fstab"

GENERATE_FSTAB_FILE="$FSTAB_PATH/generate_fstab.sh"

# Chroot
CHROOT_PATH="$BASE_PATH/chroot"

CHROOT_FILE="$CHROOT_PATH/chroot.sh"
SET_HOST_NAME_FILE="$CHROOT_PATH/set_host_name.sh"

# Localization
LOCALIZATION_PATH="$CHROOT_PATH/localization"

SET_LOCALES_FILE="$LOCALIZATION_PATH/set_locales.sh"
GENERATE_LOCALES_FILE="$LOCALIZATION_PATH/generate_locales.sh"
SET_LANGUAGE_FILE="$LOCALIZATION_PATH/set_language.sh"
SET_TIME_ZONE_FILE="$LOCALIZATION_PATH/set_time_zone.sh"
SET_HW_CLOCK_FILE="$LOCALIZATION_PATH/set_hw_clock.sh"

# Console
CONSOLE_PATH="$CHROOT_PATH/console"

SET_CONSOLE_KEYMAP_FILE="$CONSOLE_PATH/set_console_keymap.sh"
SET_CONSOLE_FONT_FILE="$CONSOLE_PATH/set_console_font.sh"

# Network
NETWORK_PATH="$CHROOT_PATH/network"

CONFIGURE_NETWORK_FILE="$NETWORK_PATH/configure_network.sh"

# Bootloader
BOOTLOADER_PATH="$CHROOT_PATH/bootloader"

INSTALL_BOOTLOADER_FILE="$BOOTLOADER_PATH/install_bootloader.sh"
CONFIGURE_BOOTLOADER_FILE="$BOOTLOADER_PATH/configure_bootloader.sh"

# Users
USERS_PATH="$CHROOT_PATH/users"

SET_ROOT_PASSWORD_FILE="$USERS_PATH/set_root_password.sh"
ADD_REGULAR_USER_FILE="$USERS_PATH/add_regular_user.sh"
SET_REGULAR_USER_PASSWORD_FILE="$USERS_PATH/set_regular_user_password.sh"
SET_SUDOERS_FILE="$USERS_PATH/set_sudoers.sh"

# CUSTOMIZATION

CUSTOMIZATION_PATH="$MODULES_PATH/customization"

UPDATE_PACKAGE_LIST_FILE="$CUSTOMIZATION_PATH/update_package_list.sh"
CONFIGURE_PACMAN_FILE="$CUSTOMIZATION_PATH/configure_pacman.sh"
INSTALL_PACKAGES_FILE="$CUSTOMIZATION_PATH/install_packages.sh"
LOAD_GUEST_MODULES_FILE="$CUSTOMIZATION_PATH/load_guest_modules.sh"
COPY_CONFIG_FILES_FILE="$CUSTOMIZATION_PATH/copy_config_files.sh"
INSTALL_DWM_FILE="$CUSTOMIZATION_PATH/install_dwm.sh"
SET_TERMINAL_VIDEO_MODE_FILE="$CUSTOMIZATION_PATH/set_terminal_video_mode.sh"
DISABLE_SYSLINUX_MENU_FILE="$CUSTOMIZATION_PATH/disable_syslinux_menu.sh"
SET_EARLY_TERMINAL_FONT_FILE="$CUSTOMIZATION_PATH/set_early_terminal_font.sh"
RECREATE_IMAGE_FILE="$CUSTOMIZATION_PATH/recreate_image.sh"

# CONFIG FILES

CONFIG_FILES_PATH="$MODULES_PATH/files"
DOTFILES_PATH="$CONFIG_FILES_PATH/dotfiles"
VIM_CONFIG_PATH="$DOTFILES_PATH/.vim"
VIM_COLORS_PATH="$VIM_CONFIG_PATH/colors"

VIRTUALBOX_CONFIG_FILE="$CONFIG_FILES_PATH/virtualbox.conf"
ISSUE_FILE="$CONFIG_FILES_PATH/issue"
BASH_PROFILE_FILE="$DOTFILES_PATH/.bash_profile"
BASHRC_FILE="$DOTFILES_PATH/.bashrc"
GITCONFIG_FILE="$DOTFILES_PATH/.gitconfig"
VIMRC_FILE="$DOTFILES_PATH/.vimrc"
VIM_SOLARIZED_FILE="$VIM_COLORS_PATH/solarized.vim"
XDEFAULTS_FILE="$DOTFILES_PATH/.Xdefaults"
XINITRC_FILE="$DOTFILES_PATH/.xinitrc"

###############################################################################
# Configuration scripts paths etc.

ISO_ARCHCCONFIG_PATH="/root"
MOUNT_PATH="/mnt"
ARCHCONFIG_PATH="/etc/archconfig"
MOUNTED_ARCHCONFIG_PATH="$MOUNT_PATH$ARCHCONFIG_PATH"
MOUNTED_CHROOT_FILE="$MOUNTED_ARCHCONFIG_PATH/$CHROOT_FILE"
MOUNTED_FUNCTIONS_FILE="$MOUNTED_ARCHCONFIG_PATH/$FUNCTIONS_FILE"
CHROOTED_FUNCTIONS_FILE="$ARCHCONFIG_PATH/$FUNCTIONS_FILE"
CHROOTED_CHROOT_FILE="$ARCHCONFIG_PATH/$CHROOT_FILE"


INSTALL_SCRIPT_LOG_FILE="/root/archconfig_install.log"
CHROOT_SCRIPT_LOG_FILE="$ARCHCONFIG_PATH/archconfig_chroot.log"
CUSTOMIZE_SCRIPT_LOG_FILE="$USER_HOME_PATH/archconfig_customize.log"

